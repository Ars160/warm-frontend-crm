<div class="products-container">
    <div class="products-header">
      <h1>üõçÔ∏è –°–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤</h1>
      
      <div class="controls">
        <div class="search-box">
          <input type="text" [(ngModel)]="searchQuery" placeholder="–ü–æ–∏—Å–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤...">
        </div>
        
        <div class="filter-box" *ngIf="categories.length > 1">
          <select [(ngModel)]="selectedCategory">
            <option *ngFor="let category of categories" [value]="category">
              {{ category === 'all' ? '–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏' : category }}
            </option>
          </select>
        </div>
      </div>
    </div>
  
    <div *ngIf="errorMessage" class="error-message">
      ‚ùå {{ errorMessage }}
    </div>
    
    <div *ngIf="successMessage" class="success-message">
      ‚úÖ {{ successMessage }}
    </div>
  
    <div *ngIf="isLoading && products.length === 0" class="loading">
      ‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤...
    </div>
  
    <div *ngIf="!isLoading && filteredProducts.length === 0" class="empty-state">
      üì≠ –ù–µ—Ç –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    </div>
  
    <div class="products-grid">
      <div *ngFor="let product of filteredProducts" class="product-card">
        <div class="product-image" *ngIf="product.imageUrl">
          <img [src]="product.imageUrl" [alt]="product.name" onerror="this.src='assets/no-image.png'">
        </div>
        
        <div class="product-details">
          <h3>{{ product.name }}</h3>
          
          <div *ngIf="product.category" class="product-category">
            –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {{ product.category }}
          </div>
          
          <div class="product-price">
            {{ product.price | currency:'KZT':'symbol-narrow':'1.2-2' }}
          </div>
          
          <div *ngIf="product.description" class="product-description">
            {{ product.description }}
          </div>
          
          <div class="product-actions">
            <input type="number" min="1" [(ngModel)]="product.quantity" placeholder="–ö–æ–ª-–≤–æ">
            <button (click)="addToCart(product, product.quantity || 1)">
              üõí –î–æ–±–∞–≤–∏—Ç—å
            </button>
          </div>
        </div>
      </div>
    </div>
  
    <div class="cart-section" *ngIf="cart.length > 0">
      <h2>üõí –í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h2>
      
      <div class="cart-items">
        <div *ngFor="let item of cart; let i = index" class="cart-item">
          <div class="item-image" *ngIf="item.imageUrl">
            <img [src]="item.imageUrl" [alt]="item.productName">
          </div>
          
          <div class="item-details">
            <h3>{{ item.productName }}</h3>
            <div class="item-controls">
              <input type="number" min="1" [(ngModel)]="item.quantity" 
                     (change)="updateQuantity(item, item.quantity)">
              <button (click)="removeFromCart(i)">üóëÔ∏è</button>
            </div>
            <div class="item-price">
              {{ item.price | currency:'KZT':'symbol-narrow':'1.2-2' }} √ó {{ item.quantity }} = 
              {{ item.price * item.quantity | currency:'KZT':'symbol-narrow':'1.2-2' }}
            </div>
          </div>
        </div>
      </div>
      
      <div class="cart-summary">
        <div class="total-amount">
          –ò—Ç–æ–≥–æ: {{ totalAmount | currency:'KZT':'symbol-narrow':'1.2-2' }}
        </div>
        
        <button class="checkout-btn" (click)="placeOrder()" [disabled]="isLoading">
          {{ isLoading ? '‚è≥ –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ...' : '‚úÖ –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑' }}
        </button>
      </div>
    </div>
  </div>